# 3.RESTful API

# 1. REST API란 무엇인가?

  API (Application Programming Interface) 는 application만 이야기하는 것이 아니라 사용자가 편리하게 사용할 수 있는 interface, API, 함수들을 이야기한다.  그리고 server입장에서의 API란 클라이언트가 사용할 수 있는 URL 같은 것들을 말한다. 

~ful 이라는 것은 가득한, ~의 성격을 지닌 으로 해석간으하다. 그러니까 rest의 성격을 가진 API를 만든다는 것과 동일하다. 

REST (Representational State Transfer) : 무언가를 나타내고 대표하는 상태를 전송하는 것을 말한다. 

서버에는 다양한 데이터가 존재한다. 그리고 이 데이터를 그룹을 지어 관련된 것들을 클라이언트에게 제공을 한다. 클라이언트는 서버에서 제공하는 URL중에서 원하는 것을 요청하면 서버는 원하는 서버에 대한 상태 값을 클라이언트에게 보낸다. 서버에 있는 데이터에 대해 나타낼 수 있는 특정한 상태를 전송한다. 이 때 Representation이 의미하는 바는 클라이언트가 서버에게 json 형태로  요청을 하면 서버에서는 원하는 json형태로 상태를 보낸다. 

서버에서 이용가능한 모든 URL에 대한 상태를 나타낼 수도 있다. 

심플하게 이야기하면 HTTP 4개를 이용해서 URL을 디자인하는 것이라고 정의할 수 있지만, REST는 Server Software Architectural를 디자인할 수 있는 style을 말한다. 그래서 웹 서비스를 만들 때 우리가 지켜야 하는 가이드 라인을 가지고 있다.

## 1.1 RESTful system

RESTful 설계를 위해서는 6가지 조건을 지켜야 한다. 

2번 3번은 http protocal 에서 자동으로 얻어갈 수 있다. 그래서 나머지 html만 제공해서 브라우저 클라이언트만 상대할 수 있으면 그건  RESTful API가 아니다. 클라이언트 종류에 상관없이 데이터를 제공할 수 있어야 하고. 하나의 공통된 API를 통해서 서버의 구조에 상관 없이 API를 이용할 수 있어야 한다. 

1. **Client-server architencture**

    서버는 클라이언트가 브라우저이든 모바일이든, 다양한 어플리케이션에 데이터를 제공할 수 있는 아키텍쳐를 유지해야한다.

2. **Statelessness**

    하나의 요청이 다른 요청과 연결되지 않아야 한다. 

3. **Cacheability**

    cach가 가능하면 cach가 가능하도록 설계 해야한다.

4. **Layered System**

    클라이언트가 서버에게 얼마나 많은 서버가 있는지, 서버 사에 게이트웨이 서버가 있던지 없던지에 상관하지않고 공통된 서버 하나로 하나의  API를 사용할 수 있도록  layered system을 만들어야 한다. 

5. **Code on demand(옵션) :필수 아냐**

    클라이언트가 원한다면 클라이언트가 수행해야하는 코드를 서버에서 클라이언트에게 보내줄 수 있다,

6. **Uniform Interface (중요)**

    이 항목이 RESTful 한 시스템인지 아닌지 결정하는 중요한 요소이다. 

    - **Uniform Interface는 4가지 특징**
    1. 클라이언트 요청에서 서버에 있는 어떤 resource(자원) 또는 도메인 데이터를 원하는지 식별할 수 있어야 한다. 그리고 서버에 어떤형태로 저장되었든, 서버에서 데이터를 어떻게 관리를 하냐에 상관없이 클라이언트가 이해할 수 있는 포멧으로 (html, json)으로 보내야한다. 
    2. 서버로부터 받은 해당 도메인을 대표할 수 있는 state 데이터를 통해서 해당 resouce에서 어떻게 더 처리할 수 있는지에 대한 모든 정보를 알수 있어야한다. 예를들어 서버로 받은 데이터를 통해서 해당 리소스에 대한 앞으로 삭제 수정을 할 때 어떤 식으로 요청을 할 수 있어야하는지 알수 있어야 한다. 
    3. 서버에서 보내는 응답 데이터 안에는 클라이언트가 어떻게 이 데이터를 처리해야하는지 반드시 담겨 있어야 한다. 암묵적으로 데이터를 보내놓고 클라이언트가 알아서 유추 하는 것이 아니라 서버에서 보내는 반응에서 이 데이터 타입이 무엇인지 알려줘야 한다. 
    4. Hypermedia를  어플리케이션 static engine 처럼 제공해야한다. (HATEOAS) 
    서버에서 URL이 있다면 클라이언트가 서버에 어떤 URL이 있는지 알아야하고 적절한 URL로 요청을 해야한다. 잘못된 URL로 요청을 하면 not found를 받게 된다. 그래서 클라이언트 쪽에서 신경써서 서버에 URL을 요청해야한다. 
    클라이언트가 서버에서  accounts에 대한걸로 하고 싶다고 요청하면 서버에서 관련된 URL을 응답으로 보내준다. 그럼 클라이언트는 그 응답을 통해서 어떤 URL을 이용하면 되는지 얻을 수 있다. 

# 2.API 디자인

web api를 디자인할 땐 서버에 있는 특정한 데이터의 CRUD를 제공하면 된다. 

이 네가지 http 메소드를 통해 어떤 동작을 할건지 정할 수 있고 무엇을 CRUD 할것인지, 서버에 어떤 데이터,아이템, 도메인에 action을 할 것인지 정의할 수 있다. 

**데이터를 가지고 무엇을 할건지는 *메서드***로 나타내고, ***URL***에는 **무엇을 할 건지** 나타내는게 중요하다.  동일한 것에 대해 action만 바꿔 삭제할것지 읽어올건지 명시 할 수 있다.


![image](https://user-images.githubusercontent.com/63430211/121029585-ab471c80-c7e3-11eb-857b-78c01703d7c2.png)