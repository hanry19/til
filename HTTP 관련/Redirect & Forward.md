# Redirect & Forward

스프링으로 웹사이트를 개발을 할 때 빈번하게 사용하는 것 중 하나가 redirect 와 forward이다. 사실 이것들을 사용할 때 크게 생각을 하고 사용을 해본적이 없는 거 같다. 

삭제 및 수정 등 버튼을 눌릴 시 "post로 값을 보내서 작업을 수행을 하지만 반환받을 페이지가 없으니 내가 지정한 A 페이지로 가라!"   라고 생각만 했지 더 깊게 생각을 못하였다. 

그런데 이번에 누군가 이런 질문을 하였다. 

"삭제를 하는데 왜 꼭 redirecr, forward로  return을 하는지 모르겠다. 그냥 다른 것들 처럼 원하는 페이지로 direcrt로 요청하면 안될까?? "

그래서 공부해 보았다. 

# Redirect

![Untitled](https://user-images.githubusercontent.com/63430211/119142852-e4f8f300-ba81-11eb-9b9f-df8b2899d02b.png)


**언제 사용되는것일까?**

**클라이언트**가 어떤 정보를 등록하고 확인버튼을 눌린다면, **클라이언트**가 **서버**에게 " 정보등록 해주세요" 라는 요청을 보낸다. 

**서버**는 해당 정보를 저장한 후 **브라우저**에게 "메인페이지로 이동해" 라는 응답을 보낸다. **브라우저**는 메인 페이지로 이동하라는 **서버**의 요청을 받은 후 자동으로 **서버**에게 메인 페이지 요청하여 응답받아 출력하게 된다. 

**redirect  ⇒ 서버가 클라이언트에게 어떤 URL로 이동하라는 요청을 보내는 것**

**동작 원리**

1. 클라이언트가 서버에 응답을 요청을 하면 서버는 상태값 3xx 와 함께 redirect 주소(locatuon)를 같이 보낸다. 
2. 클라이언트는 새로운 주소를 다시 요청하고 서버는 응답한다. 

클라이언트에서 새로운 Location에 대해 요청을 하기 때문에 Web Container 내부에서 자원을 공유할 수 없다. 자원을 공유하기 위해선 쿼리 파라미터를 생성해야 한다.

# Forward

![Untitled 1](https://user-images.githubusercontent.com/63430211/119142874-ec200100-ba81-11eb-9f5d-47b04bf3c473.png)

**언제 사용되는것일까?**

WAS의 서블릿이나 JSP가 요청을 받은 후 에 그 요청을 처리하다가 추가적인 처리를 같은 웹 어플리케이션 안에 있는 다른 서블릿이나 JSP에 위임하여 처리하는 경우 

주로 SERVLET으로 Request 요청을 보내고 JSP로 데이터를 가공하여 만든다.

(데이터르르 처리하는 부분과 문서의 구조 부분을 분리하여 작성할 수 있다.)

**동작 원리**

1. 클라이언트가 서버에 응답을 요청하면 서버는 Web Container(Tomcat, Jboss등)에 의해 LoginServlet에서 HelloServlet으로 forward 된다. 
( 이때 객체 정보는 Request Scope, Session Scope, Page Scope를 통해 전달된다)
2. 서버는 최종적으로 HelloServlet의 결과를 응답한다.
3. 클라이언트 입장에선 한번의 요청으로 결과물을 받아볼 수 있다. 

**Forward는 Web Container의 내부에서 이동하기 때문에 request와 response 객체를 공유할 수 있다.**

- **최종정리**
    1. URL의 변화여뷰가 필요하다면 Redirect 사용
    2. 객체를 재사용하거나 공유해야한다면 Forward를 사용하는 게 좋다.
    3. 시스템에(session, DB)에 변화가 생기지 않는 요청(로그인, 회원가입, 글쓰기) 의 경우 redirect방식으로 응답
    4. 시스템에 변화가 생기지 않는 단순조회(리스트보기, 검색)의 경우 Forward방식으로 응답